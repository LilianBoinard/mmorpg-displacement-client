{"remainingRequest":"/home/pyro/WebstormProjects/hissiane-client/node_modules/babel-loader/lib/index.js!/home/pyro/WebstormProjects/hissiane-client/node_modules/ts-loader/index.js??ref--14-2!/home/pyro/WebstormProjects/hissiane-client/node_modules/eslint-loader/index.js??ref--13-0!/home/pyro/WebstormProjects/hissiane-client/src/game/events/GameEvents.ts","dependencies":[{"path":"/home/pyro/WebstormProjects/hissiane-client/src/game/events/GameEvents.ts","mtime":1616409155667},{"path":"/home/pyro/WebstormProjects/hissiane-client/node_modules/cache-loader/dist/cjs.js","mtime":1615193535060},{"path":"/home/pyro/WebstormProjects/hissiane-client/node_modules/babel-loader/lib/index.js","mtime":1613997850122},{"path":"/home/pyro/WebstormProjects/hissiane-client/node_modules/ts-loader/index.js","mtime":1616081366802},{"path":"/home/pyro/WebstormProjects/hissiane-client/node_modules/eslint-loader/index.js","mtime":1613997853672}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICIvaG9tZS9weXJvL1dlYnN0b3JtUHJvamVjdHMvaGlzc2lhbmUtY2xpZW50L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jbGFzc0NhbGxDaGVjayI7CmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSAiL2hvbWUvcHlyby9XZWJzdG9ybVByb2plY3RzL2hpc3NpYW5lLWNsaWVudC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlQ2xhc3MiOwppbXBvcnQgX2luaGVyaXRzIGZyb20gIi9ob21lL3B5cm8vV2Vic3Rvcm1Qcm9qZWN0cy9oaXNzaWFuZS1jbGllbnQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2luaGVyaXRzIjsKaW1wb3J0IF9jcmVhdGVTdXBlciBmcm9tICIvaG9tZS9weXJvL1dlYnN0b3JtUHJvamVjdHMvaGlzc2lhbmUtY2xpZW50L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVTdXBlciI7CmltcG9ydCB7IGlvIH0gZnJvbSAic29ja2V0LmlvLWNsaWVudCI7CmltcG9ydCB7IHNjZW5lRXZlbnRzIH0gZnJvbSAiQC9nYW1lL2V2ZW50cy9FdmVudENlbnRlciI7Cgp2YXIgR2FtZUV2ZW50cyA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX1BoYXNlciRTY2VuZSkgewogIF9pbmhlcml0cyhHYW1lRXZlbnRzLCBfUGhhc2VyJFNjZW5lKTsKCiAgdmFyIF9zdXBlciA9IF9jcmVhdGVTdXBlcihHYW1lRXZlbnRzKTsKCiAgZnVuY3Rpb24gR2FtZUV2ZW50cygpIHsKICAgIHZhciBfdGhpczsKCiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgR2FtZUV2ZW50cyk7CgogICAgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCB7CiAgICAgIGtleTogJ0dhbWVFdmVudHMnCiAgICB9KTsKICAgIF90aGlzLnNvY2tldCA9IGlvKCJodHRwOi8vbG9jYWxob3N0OjMwMDEiLCB7CiAgICAgIHdpdGhDcmVkZW50aWFsczogdHJ1ZSwKICAgICAgZXh0cmFIZWFkZXJzOiB7CiAgICAgICAgInBoYXNlciI6ICJldmVudCIKICAgICAgfQogICAgfSk7CiAgICBfdGhpcy5ldmVudHMgPSBuZXcgUGhhc2VyLkV2ZW50cy5FdmVudEVtaXR0ZXIoKTsKICAgIHJldHVybiBfdGhpczsKICB9CgogIF9jcmVhdGVDbGFzcyhHYW1lRXZlbnRzLCBbewogICAga2V5OiAic2VuZFBpbmciLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNlbmRQaW5nKCkgewogICAgICB0aGlzLnNvY2tldC5lbWl0KCdwaW5nJywgey8vIHN1cGVya2V5OiAidmFsZXVyYWxhY29uIiwKICAgICAgICAvLyBpZDogNTYxNjU0NjUsCiAgICAgICAgLy8gbWFwOiA1NDYzNAogICAgICAgIC8vIHgKICAgICAgICAvLyB5CiAgICAgIH0pOwogICAgICB0aGlzLnNvY2tldC5vbigncG9uZycsIGZ1bmN0aW9uICgpIHsKICAgICAgICBjb25zb2xlLmxvZygicGluZyByZXR1cm5lZCBnb29kIik7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogIm5ld1BsYXllciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gbmV3UGxheWVyKCkgewogICAgICB0aGlzLnNvY2tldC5lbWl0KCduZXdwbGF5ZXInKTsKICAgICAgdGhpcy5zb2NrZXQub24oJ2FsbHBsYXllcnMnLCBmdW5jdGlvbiAoZGF0YSkgewogICAgICAgIGlmIChkYXRhKSB7CiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRhdGEubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgY29uc29sZS5sb2coJ2FkZCBwbGF5ZXIgd2l0aCBpbmZvczogaWQ6JywgZGF0YVtpXS5pZCwgJ3g6JywgZGF0YVtpXS54LCAneTonLCBkYXRhW2ldLngpOwoKICAgICAgICAgICAgaWYgKGRhdGFbaV0ueCA9PT0gMCAmJiBkYXRhW2ldLnkgPT09IDApIHsKICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgc2NlbmVFdmVudHMuZW1pdCgnbmV3UGxheWVyJywgZGF0YVtpXS5pZCwgZGF0YVtpXS54LCBkYXRhW2ldLnkpOwogICAgICAgICAgICBzY2VuZUV2ZW50cy5lbWl0KCdsb2FkQXZhdGFyJywgZGF0YVtpXS5pZCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJjaGVja1BsYXllcnMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNoZWNrUGxheWVycygpIHsKICAgICAgdGhpcy5zb2NrZXQub24oJ25ld3BsYXllcicsIGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgY29uc29sZS5sb2coIk5ldyBwbGF5ZXIgd2l0aCBpZDoiLCBkYXRhKTsKICAgICAgICBzY2VuZUV2ZW50cy5lbWl0KCduZXdQbGF5ZXInLCBkYXRhLmlkLCBkYXRhLngsIGRhdGEueSk7CiAgICAgIH0pOwogICAgICB0aGlzLnNvY2tldC5vbignZGVzdHJveXBsYXllcicsIGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgY29uc29sZS5sb2coIkRlc3Ryb3kgcGxheWVyIHdpdGggaWQ6IiwgZGF0YSk7CiAgICAgICAgc2NlbmVFdmVudHMuZW1pdCgnZGVzdHJveVBsYXllcicsIGRhdGEpOwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJjaGVja1BsYXllcnNQb3NpdGlvbiIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY2hlY2tQbGF5ZXJzUG9zaXRpb24oKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgc2NlbmVFdmVudHMub24oJ3BsYXllck1vdmVtZW50JywgZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICBfdGhpczIuc29ja2V0LmVtaXQoJ3BsYXllcm1vdmVtZW50JywgewogICAgICAgICAgaWQ6IGRhdGEuaWQsCiAgICAgICAgICBhbmltczogZGF0YS5hbmltcywKICAgICAgICAgIHg6IGRhdGEueCwKICAgICAgICAgIHk6IGRhdGEueQogICAgICAgIH0pOwogICAgICB9KTsKICAgICAgdGhpcy5zb2NrZXQub24oJ3BsYXllcm1vdmVkJywgZnVuY3Rpb24gKGRhdGEsIGFuaW1zKSB7CiAgICAgICAgc2NlbmVFdmVudHMuZW1pdCgncGxheWVyTW92ZWQnLCBkYXRhLCBhbmltcyk7CiAgICAgIH0pOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIEdhbWVFdmVudHM7Cn0oUGhhc2VyLlNjZW5lKTsKCmV4cG9ydCB7IEdhbWVFdmVudHMgYXMgZGVmYXVsdCB9Ow=="},{"version":3,"sources":["/home/pyro/WebstormProjects/hissiane-client/node_modules/eslint-loader/index.js??ref--13-0!/home/pyro/WebstormProjects/hissiane-client/src/game/events/GameEvents.ts"],"names":[],"mappings":"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","sourcesContent":["import { io } from \"socket.io-client\";\nimport {sceneEvents} from \"@/game/events/EventCenter\";\nexport default class GameEvents extends Phaser.Scene\n{\n    socket = io(\"http://localhost:3001\", {\n    withCredentials: true,\n    extraHeaders: {\n        \"phaser\": \"event\"\n    }\n});\n    constructor ()\n    {\n        super({ key: 'GameEvents' });\n    }\n    events = new Phaser.Events.EventEmitter();\n\n    sendPing() {\n\n        this.socket.emit('ping', {\n            // superkey: \"valeuralacon\",\n            // id: 56165465,\n            // map: 54634\n            // x\n            // y\n        })\n        this.socket.on('pong', () => {\n            console.log(\"ping returned good\");\n        })\n    }\n\n    newPlayer() {\n        this.socket.emit('newplayer')\n        this.socket.on('allplayers', (data) =>{\n            if (data) {\n                for (let i = 0; i < data.length; i++) {\n                    console.log('add player with infos: id:', data[i].id, 'x:', data[i].x, 'y:', data[i].x);\n                    if (data[i].x === 0 && data[i].y === 0) {\n                        continue;\n                    }\n                    sceneEvents.emit('newPlayer', data[i].id, data[i].x, data[i].y);\n                    sceneEvents.emit('loadAvatar', data[i].id);\n                }\n            }\n        })\n\n    }\n\n    checkPlayers () {\n        this.socket.on('newplayer', (data) =>{\n            console.log(\"New player with id:\", data);\n            sceneEvents.emit('newPlayer', data.id, data.x, data.y);\n        })\n\n        this.socket.on('destroyplayer', (data) =>{\n            console.log(\"Destroy player with id:\", data);\n            sceneEvents.emit('destroyPlayer', data);\n        })\n    }\n\n    checkPlayersPosition () {\n        sceneEvents.on('playerMovement', (data: {id: number; anims: string; x: number; y: number; }) =>{\n            this.socket.emit('playermovement', {\n                id: data.id,\n                anims: data.anims,\n                x: data.x,\n                y: data.y\n            });\n        })\n        this.socket.on('playermoved', (data, anims) =>{\n            sceneEvents.emit('playerMoved', data, anims);\n        })\n    }\n}\n"],"sourceRoot":""}]}