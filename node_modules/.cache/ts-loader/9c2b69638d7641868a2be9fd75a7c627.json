{"remainingRequest":"/home/pyro/WebstormProjects/hissiane-client/node_modules/babel-loader/lib/index.js!/home/pyro/WebstormProjects/hissiane-client/node_modules/ts-loader/index.js??ref--14-2!/home/pyro/WebstormProjects/hissiane-client/node_modules/eslint-loader/index.js??ref--13-0!/home/pyro/WebstormProjects/hissiane-client/src/game/scenes/PlayScene.ts","dependencies":[{"path":"/home/pyro/WebstormProjects/hissiane-client/src/game/scenes/PlayScene.ts","mtime":1616430314813},{"path":"/home/pyro/WebstormProjects/hissiane-client/node_modules/cache-loader/dist/cjs.js","mtime":1615193535060},{"path":"/home/pyro/WebstormProjects/hissiane-client/node_modules/babel-loader/lib/index.js","mtime":1613997850122},{"path":"/home/pyro/WebstormProjects/hissiane-client/node_modules/ts-loader/index.js","mtime":1616081366802},{"path":"/home/pyro/WebstormProjects/hissiane-client/node_modules/eslint-loader/index.js","mtime":1613997853672}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuam9pbiI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnNwbGl0IjsKaW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICIvaG9tZS9weXJvL1dlYnN0b3JtUHJvamVjdHMvaGlzc2lhbmUtY2xpZW50L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jbGFzc0NhbGxDaGVjayI7CmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSAiL2hvbWUvcHlyby9XZWJzdG9ybVByb2plY3RzL2hpc3NpYW5lLWNsaWVudC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlQ2xhc3MiOwppbXBvcnQgX2luaGVyaXRzIGZyb20gIi9ob21lL3B5cm8vV2Vic3Rvcm1Qcm9qZWN0cy9oaXNzaWFuZS1jbGllbnQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2luaGVyaXRzIjsKaW1wb3J0IF9jcmVhdGVTdXBlciBmcm9tICIvaG9tZS9weXJvL1dlYnN0b3JtUHJvamVjdHMvaGlzc2lhbmUtY2xpZW50L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVTdXBlciI7CmltcG9ydCB7IFNjZW5lIH0gZnJvbSAncGhhc2VyJzsKaW1wb3J0IFBsYXllciBmcm9tICdAL2dhbWUvYXZhdGFyL0F2YXRhcic7CmltcG9ydCB7IHNjZW5lRXZlbnRzIH0gZnJvbSAiQC9nYW1lL2V2ZW50cy9FdmVudENlbnRlciI7CmltcG9ydCB7IGNyZWF0ZUF2YXRhckFuaW1zIH0gZnJvbSAiQC9nYW1lL2FuaW1zL0F2YXRhckFuaW1zIjsKCnZhciBQbGF5U2NlbmUgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9TY2VuZSkgewogIF9pbmhlcml0cyhQbGF5U2NlbmUsIF9TY2VuZSk7CgogIHZhciBfc3VwZXIgPSBfY3JlYXRlU3VwZXIoUGxheVNjZW5lKTsKCiAgZnVuY3Rpb24gUGxheVNjZW5lKCkgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFBsYXlTY2VuZSk7CgogICAgcmV0dXJuIF9zdXBlci5jYWxsKHRoaXMsIHsKICAgICAga2V5OiAnUGxheVNjZW5lJwogICAgfSk7CiAgfQoKICBfY3JlYXRlQ2xhc3MoUGxheVNjZW5lLCBbewogICAga2V5OiAicHJlbG9hZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcHJlbG9hZCgpIHsKICAgICAgdGhpcy5jdXJzb3JzID0gdGhpcy5pbnB1dC5rZXlib2FyZC5jcmVhdGVDdXJzb3JLZXlzKCk7CiAgICB9CiAgfSwgewogICAga2V5OiAiY3JlYXRlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGUoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBjcmVhdGVBdmF0YXJBbmltcyh0aGlzLmFuaW1zKTsKICAgICAgdGhpcy5wbGF5ZXJNYXAgPSB7fTsKICAgICAgc2NlbmVFdmVudHMub24oJ25ld1BsYXllcicsIHRoaXMubmV3UGxheWVyLCB0aGlzKTsKICAgICAgc2NlbmVFdmVudHMub24oJ2Rlc3Ryb3lQbGF5ZXInLCB0aGlzLmRlc3Ryb3lQbGF5ZXIsIHRoaXMpOwogICAgICBzY2VuZUV2ZW50cy5vbignbG9hZEF2YXRhcicsIHRoaXMubG9hZEF2YXRhciwgdGhpcyk7CiAgICAgIHNjZW5lRXZlbnRzLm9uKCdyaWdodElzRG93bicsIHRoaXMucmlnaHRJc0Rvd24sIHRoaXMpOwogICAgICBzY2VuZUV2ZW50cy5vbignbGVmdElzRG93bicsIHRoaXMubGVmdElzRG93biwgdGhpcyk7CiAgICAgIHNjZW5lRXZlbnRzLm9uKCd1cElzRG93bicsIHRoaXMudXBJc0Rvd24sIHRoaXMpOwogICAgICBzY2VuZUV2ZW50cy5vbignZG93bklzRG93bicsIHRoaXMuZG93bklzRG93biwgdGhpcyk7CiAgICAgIHNjZW5lRXZlbnRzLm9uKCdwbGF5ZXJNb3ZlZCcsIHRoaXMucGxheWVyQWN0dWFsUG9zaXRpb24sIHRoaXMpOwogICAgICB0aGlzLmNhbSA9IHRoaXMuY2FtZXJhcy5tYWluOwogICAgICB0aGlzLmNhbS5mYWRlSW4oNTAwLCAwLCAwLCAwKTsKICAgICAgdGhpcy5jYW0uem9vbVRvKDIsIDUwMCk7CiAgICAgIHRoaXMuY2FtLnNldEJhY2tncm91bmRDb2xvcignIzBmM2Y1MicpOwogICAgICB2YXIgbWFwID0gdGhpcy5tYWtlLnRpbGVtYXAoewogICAgICAgIGtleTogJ21hcCcKICAgICAgfSk7CiAgICAgIHZhciB0aWxlc2V0R3Jhc3MgPSBtYXAuYWRkVGlsZXNldEltYWdlKCdmYW50YXN5LWdyYXNzJywgJ3RpbGVzX2dyYXNzJywgMTYsIDE2LCAxLCAyKTsKICAgICAgdmFyIHRpbGVzZXRSZWxpZWYgPSBtYXAuYWRkVGlsZXNldEltYWdlKCdmYW50YXN5LWdyYXNzJywgJ3RpbGVzX2dyYXNzJywgMTYsIDE2LCAxLCAyKTsKICAgICAgdmFyIHRpbGVzZXREZWNvcmF0aXZlID0gbWFwLmFkZFRpbGVzZXRJbWFnZSgnZmFudGFzeS1kZWNvJywgJ3RpbGVzX2RlY29yYXRpdmUnLCAxNiwgMTYsIDEsIDIpOwogICAgICB0aGlzLmxheWVyMSA9IG1hcC5jcmVhdGVTdGF0aWNMYXllcignZ3Jhc3MnLCB0aWxlc2V0R3Jhc3MpOwogICAgICB0aGlzLmxheWVyMyA9IG1hcC5jcmVhdGVTdGF0aWNMYXllcigncmVsaWVmJywgdGlsZXNldFJlbGllZik7CiAgICAgIHRoaXMubGF5ZXIyID0gbWFwLmNyZWF0ZVN0YXRpY0xheWVyKCdkZWNvJywgdGlsZXNldERlY29yYXRpdmUpOwogICAgICB0aGlzLmxheWVyMy5zZXRDb2xsaXNpb25CeVByb3BlcnR5KHsKICAgICAgICBjb2xsaWRlczogdHJ1ZQogICAgICB9KTsKICAgICAgdGhpcy5sYXllcjEuc2V0Q29sbGlzaW9uQnlQcm9wZXJ0eSh7CiAgICAgICAgY29sbGlkZXM6IHRydWUKICAgICAgfSk7CiAgICAgIHRoaXMubGF5ZXIyLnNldENvbGxpc2lvbkJ5UHJvcGVydHkoewogICAgICAgIGNvbGxpZGVzOiB0cnVlCiAgICAgIH0pOyAvLyB0aGlzLmF2YXRhciA9IHRoaXMuYWRkLmF2YXRhcig2MDAsIDIwMCwgJ2F2YXRhcicpOwogICAgICAvLyBjYW0uc3RhcnRGb2xsb3codGhpcy5hdmF0YXIpOwogICAgICAvLwogICAgICAvLyAtLS0tLSBDYW1lcmEgbW92ZSB3aXRoIG1vdXNlIC0tLS0tCiAgICAgIC8vIHRoaXMuaW5wdXQub24oJ3BvaW50ZXJtb3ZlJywgKHA6IHsgaXNEb3duOiBhbnk7IHg6IG51bWJlcjsgcHJldlBvc2l0aW9uOiB7IHg6IG51bWJlcjsgeTogbnVtYmVyOyB9OyB5OiBudW1iZXI7IH0pID0+IHsKICAgICAgLy8gICBpZiAocC5pc0Rvd24pIHsKICAgICAgLy8gICAgIHRoaXMuY2FtLnN0b3BGb2xsb3coKTsKICAgICAgLy8gICAgIHRoaXMuY2FtLnNjcm9sbFggLT0gKHAueCAtIHAucHJldlBvc2l0aW9uLngpIC8gdGhpcy5jYW0uem9vbTsKICAgICAgLy8gICAgIHRoaXMuY2FtLnNjcm9sbFkgLT0gKHAueSAtIHAucHJldlBvc2l0aW9uLnkpIC8gdGhpcy5jYW0uem9vbTsKICAgICAgLy8gICB9CiAgICAgIC8vIH0pOwoKICAgICAgdGhpcy5pbnB1dC5vbigncG9pbnRlcm1vdmUnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgaWYgKF90aGlzLnRleHQpIHsKICAgICAgICAgIF90aGlzLnRleHQuZGVzdHJveSgpOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHRoaXMuaW5wdXQub24oJ3doZWVsJywgZnVuY3Rpb24gKHBvaW50ZXIsIGdhbWVPYmplY3RzLCBkZWx0YVgsIGRlbHRhWSkgewogICAgICAgIGlmIChkZWx0YVkgPiAwKSB7CiAgICAgICAgICBfdGhpcy5jYW0uem9vbSAtPSAuMTsKICAgICAgICB9CgogICAgICAgIGlmIChkZWx0YVkgPCAwKSB7CiAgICAgICAgICBfdGhpcy5jYW0uem9vbSArPSAuMTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogIm5ld1BsYXllciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gbmV3UGxheWVyKGlkLCB4LCB5KSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdGhpcy5wbGF5ZXJNYXBbaWRdID0gdGhpcy5hZGQuZXhpc3RpbmcobmV3IFBsYXllcih0aGlzLCBpZCwgeCwgeSkpLnNldEludGVyYWN0aXZlKCk7CiAgICAgIHRoaXMucGh5c2ljcy53b3JsZC5lbmFibGVCb2R5KHRoaXMucGxheWVyTWFwW2lkXSwgUGhhc2VyLlBoeXNpY3MuQXJjYWRlLkRZTkFNSUNfQk9EWSk7CiAgICAgIHRoaXMucGxheWVyTWFwW2lkXS5ib2R5LnNldFNpemUodGhpcy5wbGF5ZXJNYXBbaWRdLndpZHRoIC8gMywgdGhpcy5wbGF5ZXJNYXBbaWRdLmhlaWdodCAvIDIpOwogICAgICB0aGlzLnBsYXllck1hcFtpZF0ub24oJ3BvaW50ZXJkb3duJywgZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzMi50ZXh0ID0gX3RoaXMyLmFkZC50ZXh0KF90aGlzMi5wbGF5ZXJNYXBbaWRdLngsIF90aGlzMi5wbGF5ZXJNYXBbaWRdLnksICdQbGF5ZXIgSUQ6ICcgKyBpZCArICdcbng6ICcgKyB4ICsgJ1xueTogJyArIHksIHsKICAgICAgICAgIHJlc29sdXRpb246IDUsCiAgICAgICAgICBmaXhlZEhlaWdodDogMTAwLAogICAgICAgICAgZml4ZWRXaWR0aDogMjAwLAogICAgICAgICAgZm9udFNpemU6ICcyMHB4JywKICAgICAgICAgIGZvbnRGYW1pbHk6ICdBcmlhbCcsCiAgICAgICAgICBjb2xvcjogJyMwMDAwMDAnLAogICAgICAgICAgYmFja2dyb3VuZENvbG9yOiAnIzM2M2QyNScsCiAgICAgICAgICBhbGlnbjogJ2NlbnRlcicKICAgICAgICB9KS5zZXRPcmlnaW4oMC41KTsKICAgICAgfSk7CiAgICAgIHRoaXMucGxheWVyTWFwW2lkXS5vbigncG9pbnRlcnVwJywgZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzMi50ZXh0LmRlc3Ryb3koKTsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAiZGVzdHJveVBsYXllciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZGVzdHJveVBsYXllcihpZCkgewogICAgICB0aGlzLnBsYXllck1hcFtpZF0uZGVzdHJveSgpOwogICAgICBkZWxldGUgdGhpcy5wbGF5ZXJNYXBbaWRdOwogICAgfQogIH0sIHsKICAgIGtleTogImxvYWRBdmF0YXIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGxvYWRBdmF0YXIoaWQpIHsKICAgICAgdGhpcy5hdmF0YXIgPSB0aGlzLnBsYXllck1hcFtpZF07CiAgICAgIHRoaXMuYXZhdGFyLm9sZFBvc2l0aW9uID0gewogICAgICAgIHg6IHRoaXMuYXZhdGFyLngsCiAgICAgICAgeTogdGhpcy5hdmF0YXIueQogICAgICB9OwogICAgICB0aGlzLmF2YXRhci5hbmltcy5wbGF5KCJhdmF0YXItaWRsZS1kb3duIik7CiAgICAgIHRoaXMuYXZhdGFyLmFjdHVhbEFuaW1zID0gJ2F2YXRhci1pZGxlLWRvd24nOwogICAgICB0aGlzLmNhbS5zdGFydEZvbGxvdyh0aGlzLnBsYXllck1hcFtpZF0pOwogICAgICB0aGlzLnBoeXNpY3MuYWRkLmNvbGxpZGVyKHRoaXMuYXZhdGFyLCB0aGlzLmxheWVyMSk7CiAgICAgIHRoaXMucGh5c2ljcy5hZGQuY29sbGlkZXIodGhpcy5hdmF0YXIsIHRoaXMubGF5ZXIyKTsKICAgICAgdGhpcy5waHlzaWNzLmFkZC5jb2xsaWRlcih0aGlzLmF2YXRhciwgdGhpcy5sYXllcjMpOwogICAgfQogIH0sIHsKICAgIGtleTogInJpZ2h0SXNEb3duIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByaWdodElzRG93bigpIHsKICAgICAgdGhpcy5hdmF0YXIuYW5pbXMucGxheSgnYXZhdGFyLXJ1bi1zaWRlLXJpZ2h0JywgdHJ1ZSk7CiAgICAgIHRoaXMuYXZhdGFyLnNldFZlbG9jaXR5KDEwMCwgMCk7CiAgICB9CiAgfSwgewogICAga2V5OiAibGVmdElzRG93biIsCiAgICB2YWx1ZTogZnVuY3Rpb24gbGVmdElzRG93bigpIHsKICAgICAgdGhpcy5hdmF0YXIuYW5pbXMucGxheSgnYXZhdGFyLXJ1bi1zaWRlLWxlZnQnLCB0cnVlKTsKICAgICAgdGhpcy5hdmF0YXIuc2V0VmVsb2NpdHkoLTEwMCwgMCk7CiAgICB9CiAgfSwgewogICAga2V5OiAidXBJc0Rvd24iLAogICAgdmFsdWU6IGZ1bmN0aW9uIHVwSXNEb3duKCkgewogICAgICB0aGlzLmF2YXRhci5hbmltcy5wbGF5KCdhdmF0YXItcnVuLXVwJywgdHJ1ZSk7CiAgICAgIHRoaXMuYXZhdGFyLnNldFZlbG9jaXR5KDAsIC0xMDApOwogICAgfQogIH0sIHsKICAgIGtleTogImRvd25Jc0Rvd24iLAogICAgdmFsdWU6IGZ1bmN0aW9uIGRvd25Jc0Rvd24oKSB7CiAgICAgIHRoaXMuYXZhdGFyLmFuaW1zLnBsYXkoJ2F2YXRhci1ydW4tZG93bicsIHRydWUpOwogICAgICB0aGlzLmF2YXRhci5zZXRWZWxvY2l0eSgwLCAxMDApOwogICAgfQogIH0sIHsKICAgIGtleTogInBsYXllckFjdHVhbFBvc2l0aW9uIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBwbGF5ZXJBY3R1YWxQb3NpdGlvbihwbGF5ZXIsIGFuaW1zKSB7CiAgICAgIHRoaXMucGxheWVyTWFwW3BsYXllci5pZF0uYW5pbXMucGxheShhbmltcywgdHJ1ZSk7CiAgICAgIHRoaXMucGxheWVyTWFwW3BsYXllci5pZF0ueCA9IHBsYXllci54OwogICAgICB0aGlzLnBsYXllck1hcFtwbGF5ZXIuaWRdLnkgPSBwbGF5ZXIueTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJ1cGRhdGUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHVwZGF0ZSgpIHsKICAgICAgdmFyIF90aGlzJGN1cnNvcnMkcmlnaHQsIF90aGlzJGN1cnNvcnMkbGVmdCwgX3RoaXMkY3Vyc29ycyR1cCwgX3RoaXMkY3Vyc29ycyRkb3duOwoKICAgICAgaWYgKCF0aGlzLmN1cnNvcnMgfHwgIXRoaXMuYXZhdGFyKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAoKF90aGlzJGN1cnNvcnMkcmlnaHQgPSB0aGlzLmN1cnNvcnMucmlnaHQpID09PSBudWxsIHx8IF90aGlzJGN1cnNvcnMkcmlnaHQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJGN1cnNvcnMkcmlnaHQuaXNEb3duKSB7CiAgICAgICAgc2NlbmVFdmVudHMuZW1pdCgncmlnaHRJc0Rvd24nKTsKICAgICAgICB0aGlzLmF2YXRhci5hY3R1YWxBbmltcyA9ICdhdmF0YXItcnVuLXNpZGUtcmlnaHQnOwogICAgICB9IGVsc2UgaWYgKChfdGhpcyRjdXJzb3JzJGxlZnQgPSB0aGlzLmN1cnNvcnMubGVmdCkgPT09IG51bGwgfHwgX3RoaXMkY3Vyc29ycyRsZWZ0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRjdXJzb3JzJGxlZnQuaXNEb3duKSB7CiAgICAgICAgc2NlbmVFdmVudHMuZW1pdCgnbGVmdElzRG93bicpOwogICAgICAgIHRoaXMuYXZhdGFyLmFjdHVhbEFuaW1zID0gJ2F2YXRhci1ydW4tc2lkZS1sZWZ0JzsKICAgICAgfSBlbHNlIGlmICgoX3RoaXMkY3Vyc29ycyR1cCA9IHRoaXMuY3Vyc29ycy51cCkgPT09IG51bGwgfHwgX3RoaXMkY3Vyc29ycyR1cCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkY3Vyc29ycyR1cC5pc0Rvd24pIHsKICAgICAgICBzY2VuZUV2ZW50cy5lbWl0KCd1cElzRG93bicpOwogICAgICAgIHRoaXMuYXZhdGFyLmFjdHVhbEFuaW1zID0gJ2F2YXRhci1ydW4tdXAnOwogICAgICB9IGVsc2UgaWYgKChfdGhpcyRjdXJzb3JzJGRvd24gPSB0aGlzLmN1cnNvcnMuZG93bikgPT09IG51bGwgfHwgX3RoaXMkY3Vyc29ycyRkb3duID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRjdXJzb3JzJGRvd24uaXNEb3duKSB7CiAgICAgICAgc2NlbmVFdmVudHMuZW1pdCgnZG93bklzRG93bicpOwogICAgICAgIHRoaXMuYXZhdGFyLmFjdHVhbEFuaW1zID0gJ2F2YXRhci1ydW4tZG93bic7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFyIHBhcnRzID0gdGhpcy5hdmF0YXIuYW5pbXMuY3VycmVudEFuaW0ua2V5LnNwbGl0KCctJyk7CiAgICAgICAgcGFydHNbMV0gPSAnaWRsZSc7CiAgICAgICAgdGhpcy5hdmF0YXIuYW5pbXMucGxheShwYXJ0cy5qb2luKCctJykpOwogICAgICAgIHRoaXMuYXZhdGFyLmFjdHVhbEFuaW1zID0gcGFydHMuam9pbignLScpOwogICAgICAgIHRoaXMuYXZhdGFyLnNldFZlbG9jaXR5KDAsIDApOwogICAgICB9CgogICAgICB2YXIgeCA9IHRoaXMuYXZhdGFyLng7CiAgICAgIHZhciB5ID0gdGhpcy5hdmF0YXIueTsKCiAgICAgIGlmICh0aGlzLmF2YXRhci5vbGRQb3NpdGlvbiAmJiAoeCAhPT0gdGhpcy5hdmF0YXIub2xkUG9zaXRpb24ueCB8fCB5ICE9PSB0aGlzLmF2YXRhci5vbGRQb3NpdGlvbi55KSkgewogICAgICAgIHNjZW5lRXZlbnRzLmVtaXQoJ3BsYXllck1vdmVtZW50JywgewogICAgICAgICAgYW5pbXM6IHRoaXMuYXZhdGFyLmFjdHVhbEFuaW1zLAogICAgICAgICAgeDogdGhpcy5hdmF0YXIueCwKICAgICAgICAgIHk6IHRoaXMuYXZhdGFyLnkKICAgICAgICB9KTsKICAgICAgICB0aGlzLmF2YXRhci5vbGRQb3NpdGlvbiA9IHsKICAgICAgICAgIHg6IHRoaXMuYXZhdGFyLngsCiAgICAgICAgICB5OiB0aGlzLmF2YXRhci55CiAgICAgICAgfTsKICAgICAgfQogICAgfQogIH1dKTsKCiAgcmV0dXJuIFBsYXlTY2VuZTsKfShTY2VuZSk7CgpleHBvcnQgeyBQbGF5U2NlbmUgYXMgZGVmYXVsdCB9Ow=="},{"version":3,"sources":["/home/pyro/WebstormProjects/hissiane-client/node_modules/eslint-loader/index.js??ref--13-0!/home/pyro/WebstormProjects/hissiane-client/src/game/scenes/PlayScene.ts"],"names":[],"mappings":"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","sourcesContent":["import { Scene } from 'phaser';\nimport Player from '@/game/avatar/Avatar';\nimport {sceneEvents} from \"@/game/events/EventCenter\";\nimport {createAvatarAnims} from \"@/game/anims/AvatarAnims\";\n\nexport default class PlayScene extends Scene {\n  private cam!: any;\n  private avatar!: any;\n  private playerMap!: any;\n  private cursors!: Phaser.Types.Input.Keyboard.CursorKeys;\n  private layer1: any;\n  private layer2: any;\n  private layer3: any;\n  private text!: any;\n\n  constructor() {\n    super({key: 'PlayScene'})\n  }\n\n  preload() {\n    this.cursors = this.input.keyboard.createCursorKeys();\n  }\n\n  create() {\n\n    createAvatarAnims(this.anims);\n    this.playerMap = {};\n    sceneEvents.on('newPlayer', this.newPlayer, this)\n    sceneEvents.on('destroyPlayer', this.destroyPlayer, this)\n    sceneEvents.on('loadAvatar', this.loadAvatar, this)\n    sceneEvents.on('rightIsDown', this.rightIsDown, this)\n    sceneEvents.on('leftIsDown', this.leftIsDown, this)\n    sceneEvents.on('upIsDown', this.upIsDown, this)\n    sceneEvents.on('downIsDown', this.downIsDown, this)\n    sceneEvents.on('playerMoved', this.playerActualPosition, this)\n\n    this.cam = this.cameras.main;\n    this.cam.fadeIn(500, 0, 0, 0);\n    this.cam.zoomTo(2, 500);\n    this.cam.setBackgroundColor('#0f3f52');\n\n    const map = this.make.tilemap({key: 'map'});\n\n    const tilesetGrass = map.addTilesetImage('fantasy-grass', 'tiles_grass', 16, 16, 1, 2);\n    const tilesetRelief = map.addTilesetImage('fantasy-grass', 'tiles_grass', 16, 16, 1, 2);\n    const tilesetDecorative = map.addTilesetImage('fantasy-deco', 'tiles_decorative', 16, 16, 1, 2);\n\n    this.layer1 = map.createStaticLayer('grass', tilesetGrass);\n    this.layer3 = map.createStaticLayer('relief', tilesetRelief);\n    this.layer2 = map.createStaticLayer('deco', tilesetDecorative);\n    this.layer3.setCollisionByProperty({collides: true});\n    this.layer1.setCollisionByProperty({collides: true});\n    this.layer2.setCollisionByProperty({collides: true});\n    // this.avatar = this.add.avatar(600, 200, 'avatar');\n    // cam.startFollow(this.avatar);\n    //\n    // ----- Camera move with mouse -----\n    // this.input.on('pointermove', (p: { isDown: any; x: number; prevPosition: { x: number; y: number; }; y: number; }) => {\n    //   if (p.isDown) {\n    //     this.cam.stopFollow();\n    //     this.cam.scrollX -= (p.x - p.prevPosition.x) / this.cam.zoom;\n    //     this.cam.scrollY -= (p.y - p.prevPosition.y) / this.cam.zoom;\n    //   }\n    // });\n    this.input.on('pointermove', () => {\n      if (this.text) {\n        this.text.destroy()\n      }\n    });\n    this.input.on('wheel', (pointer: any, gameObjects: any, deltaX: any, deltaY: number) => {\n      if (deltaY > 0) {\n        this.cam.zoom -= .1;\n      }\n      if (deltaY < 0) {\n        this.cam.zoom += .1;\n      }\n    });\n  }\n\n  newPlayer(id: number, x: number, y: number) {\n    this.playerMap[id] = this.add.existing(new Player(this, id, x, y)).setInteractive();\n    this.physics.world.enableBody(this.playerMap[id], Phaser.Physics.Arcade.DYNAMIC_BODY)\n    this.playerMap[id].body.setSize(this.playerMap[id].width / 3, this.playerMap[id].height / 2)\n    this.playerMap[id].on('pointerdown', () => {\n      this.text = this.add.text(this.playerMap[id].x, this.playerMap[id].y, 'Player ID: ' + id + '\\nx: ' + x + '\\ny: ' + y, {\n        resolution: 5,\n        fixedHeight: 100,\n        fixedWidth: 200,\n        fontSize: '20px',\n        fontFamily: 'Arial',\n        color: '#000000',\n        backgroundColor: '#363d25',\n        align: 'center',\n      })\n          .setOrigin(0.5);\n    });\n    this.playerMap[id].on('pointerup', () => {\n      this.text.destroy();\n    })\n  }\n\n  destroyPlayer(id: number) {\n    this.playerMap[id].destroy();\n    delete this.playerMap[id];\n  }\n\n  loadAvatar(id: number) {\n    this.avatar = this.playerMap[id];\n    this.avatar.oldPosition = {\n      x: this.avatar.x,\n      y: this.avatar.y\n    }\n    this.avatar.anims.play(\"avatar-idle-down\");\n    this.avatar.actualAnims = 'avatar-idle-down';\n    this.cam.startFollow(this.playerMap[id]);\n    this.physics.add.collider(this.avatar, this.layer1);\n    this.physics.add.collider(this.avatar, this.layer2);\n    this.physics.add.collider(this.avatar, this.layer3);\n  }\n\n  rightIsDown () {\n    this.avatar.anims.play('avatar-run-side-right', true);\n    this.avatar.setVelocity(100, 0);\n  }\n  leftIsDown () {\n    this.avatar.anims.play('avatar-run-side-left', true);\n    this.avatar.setVelocity(-100, 0);\n  }\n  upIsDown () {\n    this.avatar.anims.play('avatar-run-up', true);\n    this.avatar.setVelocity(0, -100);\n  }\n  downIsDown () {\n    this.avatar.anims.play('avatar-run-down', true);\n    this.avatar.setVelocity(0, 100);\n  }\n\n  playerActualPosition (player: any, anims: string) {\n    this.playerMap[player.id].anims.play(anims, true);\n    this.playerMap[player.id].x = player.x;\n    this.playerMap[player.id].y = player.y;\n  }\n\n  update() {\n    if (!this.cursors || !this.avatar)\n    {\n      return;\n    }\n    if (this.cursors.right?.isDown) {\n      sceneEvents.emit('rightIsDown');\n      this.avatar.actualAnims = 'avatar-run-side-right';\n    } else if (this.cursors.left?.isDown) {\n      sceneEvents.emit('leftIsDown');\n      this.avatar.actualAnims = 'avatar-run-side-left';\n    } else if (this.cursors.up?.isDown) {\n      sceneEvents.emit('upIsDown')\n      this.avatar.actualAnims = 'avatar-run-up';\n    } else if (this.cursors.down?.isDown) {\n      sceneEvents.emit('downIsDown')\n      this.avatar.actualAnims = 'avatar-run-down';\n    } else\n    {\n      const parts = this.avatar.anims.currentAnim.key.split('-')\n      parts[1] = 'idle'\n      this.avatar.anims.play(parts.join('-'))\n      this.avatar.actualAnims = parts.join('-');\n      this.avatar.setVelocity(0, 0)\n    }\n    const x = this.avatar.x;\n    const y = this.avatar.y;\n    if (this.avatar.oldPosition && (x !== this.avatar.oldPosition.x || y !== this.avatar.oldPosition.y)) {\n      sceneEvents.emit('playerMovement', { anims: this.avatar.actualAnims, x: this.avatar.x, y: this.avatar.y });\n      this.avatar.oldPosition = {\n        x: this.avatar.x,\n        y: this.avatar.y\n      }\n    }\n  }\n}\n"],"sourceRoot":""}]}