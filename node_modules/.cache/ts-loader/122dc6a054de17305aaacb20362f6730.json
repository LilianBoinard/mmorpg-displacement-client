{"remainingRequest":"/home/pyro/WebstormProjects/hissiane-client/node_modules/thread-loader/dist/cjs.js!/home/pyro/WebstormProjects/hissiane-client/node_modules/babel-loader/lib/index.js!/home/pyro/WebstormProjects/hissiane-client/node_modules/ts-loader/index.js??ref--14-3!/home/pyro/WebstormProjects/hissiane-client/node_modules/eslint-loader/index.js??ref--13-0!/home/pyro/WebstormProjects/hissiane-client/src/game/avatar/Avatar.ts","dependencies":[{"path":"/home/pyro/WebstormProjects/hissiane-client/src/game/avatar/Avatar.ts","mtime":1616111275644},{"path":"/home/pyro/WebstormProjects/hissiane-client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/pyro/WebstormProjects/hissiane-client/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/pyro/WebstormProjects/hissiane-client/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/pyro/WebstormProjects/hissiane-client/node_modules/ts-loader/index.js","mtime":499162500000},{"path":"/home/pyro/WebstormProjects/hissiane-client/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICIvaG9tZS9weXJvL1dlYnN0b3JtUHJvamVjdHMvaGlzc2lhbmUtY2xpZW50L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jbGFzc0NhbGxDaGVjayI7CmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSAiL2hvbWUvcHlyby9XZWJzdG9ybVByb2plY3RzL2hpc3NpYW5lLWNsaWVudC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlQ2xhc3MiOwppbXBvcnQgX2dldCBmcm9tICIvaG9tZS9weXJvL1dlYnN0b3JtUHJvamVjdHMvaGlzc2lhbmUtY2xpZW50L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9nZXQiOwppbXBvcnQgX2dldFByb3RvdHlwZU9mIGZyb20gIi9ob21lL3B5cm8vV2Vic3Rvcm1Qcm9qZWN0cy9oaXNzaWFuZS1jbGllbnQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2dldFByb3RvdHlwZU9mIjsKaW1wb3J0IF9pbmhlcml0cyBmcm9tICIvaG9tZS9weXJvL1dlYnN0b3JtUHJvamVjdHMvaGlzc2lhbmUtY2xpZW50L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9pbmhlcml0cyI7CmltcG9ydCBfY3JlYXRlU3VwZXIgZnJvbSAiL2hvbWUvcHlyby9XZWJzdG9ybVByb2plY3RzL2hpc3NpYW5lLWNsaWVudC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlU3VwZXIiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3BsaXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmpvaW4uanMiOwppbXBvcnQgUGhhc2VyIGZyb20gJ3BoYXNlcic7Cgp2YXIgQXZhdGFyID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfUGhhc2VyJFBoeXNpY3MkQXJjYWQpIHsKICBfaW5oZXJpdHMoQXZhdGFyLCBfUGhhc2VyJFBoeXNpY3MkQXJjYWQpOwoKICB2YXIgX3N1cGVyID0gX2NyZWF0ZVN1cGVyKEF2YXRhcik7CgogIGZ1bmN0aW9uIEF2YXRhcihzY2VuZSwgeCwgeSwgdGV4dHVyZSwgZnJhbWUpIHsKICAgIHZhciBfdGhpczsKCiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQXZhdGFyKTsKCiAgICBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHNjZW5lLCB4LCB5LCB0ZXh0dXJlLCBmcmFtZSk7CgogICAgX3RoaXMuYW5pbXMucGxheSgnYXZhdGFyLWlkbGUtZG93bicpOwoKICAgIHJldHVybiBfdGhpczsKICB9CgogIF9jcmVhdGVDbGFzcyhBdmF0YXIsIFt7CiAgICBrZXk6ICJwcmVVcGRhdGUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHByZVVwZGF0ZSh0LCBkdCkgewogICAgICBfZ2V0KF9nZXRQcm90b3R5cGVPZihBdmF0YXIucHJvdG90eXBlKSwgInByZVVwZGF0ZSIsIHRoaXMpLmNhbGwodGhpcywgdCwgZHQpOwogICAgfQogIH0sIHsKICAgIGtleTogInVwZGF0ZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gdXBkYXRlKGN1cnNvcnMpIHsKICAgICAgdmFyIF9jdXJzb3JzJGxlZnQsIF9jdXJzb3JzJHJpZ2h0LCBfY3Vyc29ycyR1cCwgX2N1cnNvcnMkZG93bjsKCiAgICAgIGlmICghY3Vyc29ycykgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdmFyIHNwZWVkID0gMTAwOwogICAgICB2YXIgbGVmdERvd24gPSAoX2N1cnNvcnMkbGVmdCA9IGN1cnNvcnMubGVmdCkgPT09IG51bGwgfHwgX2N1cnNvcnMkbGVmdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2N1cnNvcnMkbGVmdC5pc0Rvd247CiAgICAgIHZhciByaWdodERvd24gPSAoX2N1cnNvcnMkcmlnaHQgPSBjdXJzb3JzLnJpZ2h0KSA9PT0gbnVsbCB8fCBfY3Vyc29ycyRyaWdodCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2N1cnNvcnMkcmlnaHQuaXNEb3duOwogICAgICB2YXIgdXBEb3duID0gKF9jdXJzb3JzJHVwID0gY3Vyc29ycy51cCkgPT09IG51bGwgfHwgX2N1cnNvcnMkdXAgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jdXJzb3JzJHVwLmlzRG93bjsKICAgICAgdmFyIGRvd25Eb3duID0gKF9jdXJzb3JzJGRvd24gPSBjdXJzb3JzLmRvd24pID09PSBudWxsIHx8IF9jdXJzb3JzJGRvd24gPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jdXJzb3JzJGRvd24uaXNEb3duOwoKICAgICAgaWYgKGxlZnREb3duKSB7CiAgICAgICAgdGhpcy5hbmltcy5wbGF5KCdhdmF0YXItcnVuLXNpZGUnLCB0cnVlKTsKICAgICAgICB0aGlzLnNldFZlbG9jaXR5KC1zcGVlZCwgMCk7CiAgICAgICAgdGhpcy5zY2FsZVggPSAtMTsKICAgICAgICB0aGlzLmJvZHkub2Zmc2V0LnggPSAyNDsKICAgICAgfSBlbHNlIGlmIChyaWdodERvd24pIHsKICAgICAgICB0aGlzLmFuaW1zLnBsYXkoJ2F2YXRhci1ydW4tc2lkZScsIHRydWUpOwogICAgICAgIHRoaXMuc2V0VmVsb2NpdHkoc3BlZWQsIDApOwogICAgICAgIHRoaXMuc2NhbGVYID0gMTsKICAgICAgICB0aGlzLmJvZHkub2Zmc2V0LnggPSA4OwogICAgICB9IGVsc2UgaWYgKHVwRG93bikgewogICAgICAgIHRoaXMuYW5pbXMucGxheSgnYXZhdGFyLXJ1bi11cCcsIHRydWUpOwogICAgICAgIHRoaXMuc2V0VmVsb2NpdHkoMCwgLXNwZWVkKTsKICAgICAgfSBlbHNlIGlmIChkb3duRG93bikgewogICAgICAgIHRoaXMuYW5pbXMucGxheSgnYXZhdGFyLXJ1bi1kb3duJywgdHJ1ZSk7CiAgICAgICAgdGhpcy5zZXRWZWxvY2l0eSgwLCBzcGVlZCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFyIHBhcnRzID0gdGhpcy5hbmltcy5jdXJyZW50QW5pbS5rZXkuc3BsaXQoJy0nKTsKICAgICAgICBwYXJ0c1sxXSA9ICdpZGxlJzsKICAgICAgICB0aGlzLmFuaW1zLnBsYXkocGFydHMuam9pbignLScpKTsKICAgICAgICB0aGlzLnNldFZlbG9jaXR5KDAsIDApOwogICAgICB9CiAgICB9CiAgfV0pOwoKICByZXR1cm4gQXZhdGFyOwp9KFBoYXNlci5QaHlzaWNzLkFyY2FkZS5TcHJpdGUpOwoKZXhwb3J0IHsgQXZhdGFyIGFzIGRlZmF1bHQgfTsKUGhhc2VyLkdhbWVPYmplY3RzLkdhbWVPYmplY3RGYWN0b3J5LnJlZ2lzdGVyKCdhdmF0YXInLCBmdW5jdGlvbiAoeCwgeSwgdGV4dHVyZSwgZnJhbWUpIHsKICB2YXIgc3ByaXRlID0gbmV3IEF2YXRhcih0aGlzLnNjZW5lLCB4LCB5LCB0ZXh0dXJlLCBmcmFtZSk7CiAgdGhpcy5kaXNwbGF5TGlzdC5hZGQoc3ByaXRlKTsKICB0aGlzLnVwZGF0ZUxpc3QuYWRkKHNwcml0ZSk7CiAgdGhpcy5zY2VuZS5waHlzaWNzLndvcmxkLmVuYWJsZUJvZHkoc3ByaXRlLCBQaGFzZXIuUGh5c2ljcy5BcmNhZGUuRFlOQU1JQ19CT0RZKTsKICBzcHJpdGUuYm9keS5zZXRTaXplKHNwcml0ZS53aWR0aCAqIDAuNSwgc3ByaXRlLmhlaWdodCAqIDAuOCk7CiAgcmV0dXJuIHNwcml0ZTsKfSk7"},{"version":3,"sources":["/home/pyro/WebstormProjects/hissiane-client/node_modules/eslint-loader/index.js??ref--13-0!/home/pyro/WebstormProjects/hissiane-client/src/game/avatar/Avatar.ts"],"names":[],"mappings":";;;;;;;;;AAAA,OAAO,MAAP,MAAmB,QAAnB;;IAaqB,M;;;;;AACjB,kBAAY,KAAZ,EAAiC,CAAjC,EAA4C,CAA5C,EAAuD,OAAvD,EAAwE,KAAxE,EAA+F;AAAA;;AAAA;;AAC3F,8BAAM,KAAN,EAAa,CAAb,EAAgB,CAAhB,EAAmB,OAAnB,EAA4B,KAA5B;;AAEA,UAAK,KAAL,CAAW,IAAX,CAAgB,kBAAhB;;AAH2F;AAI9F;;;;WAED,mBAAU,CAAV,EAAqB,EAArB,EAA+B;AAC3B,4EAAgB,CAAhB,EAAmB,EAAnB;AACH;;;WAED,gBAAO,OAAP,EAAsD;AAAA;;AAElD,UAAI,CAAC,OAAL,EAAc;AACV;AACH;;AAED,UAAM,KAAK,GAAG,GAAd;AAEA,UAAM,QAAQ,oBAAG,OAAO,CAAC,IAAX,kDAAG,cAAc,MAA/B;AACA,UAAM,SAAS,qBAAG,OAAO,CAAC,KAAX,mDAAG,eAAe,MAAjC;AACA,UAAM,MAAM,kBAAG,OAAO,CAAC,EAAX,gDAAG,YAAY,MAA3B;AACA,UAAM,QAAQ,oBAAG,OAAO,CAAC,IAAX,kDAAG,cAAc,MAA/B;;AAEA,UAAI,QAAJ,EAAc;AACV,aAAK,KAAL,CAAW,IAAX,CAAgB,iBAAhB,EAAmC,IAAnC;AACA,aAAK,WAAL,CAAiB,CAAC,KAAlB,EAAyB,CAAzB;AAEA,aAAK,MAAL,GAAc,CAAC,CAAf;AACA,aAAK,IAAL,CAAU,MAAV,CAAiB,CAAjB,GAAqB,EAArB;AACH,OAND,MAMO,IAAI,SAAJ,EAAe;AAClB,aAAK,KAAL,CAAW,IAAX,CAAgB,iBAAhB,EAAmC,IAAnC;AACA,aAAK,WAAL,CAAiB,KAAjB,EAAwB,CAAxB;AAEA,aAAK,MAAL,GAAc,CAAd;AACA,aAAK,IAAL,CAAU,MAAV,CAAiB,CAAjB,GAAqB,CAArB;AACH,OANM,MAMA,IAAI,MAAJ,EAAY;AACf,aAAK,KAAL,CAAW,IAAX,CAAgB,eAAhB,EAAiC,IAAjC;AACA,aAAK,WAAL,CAAiB,CAAjB,EAAoB,CAAC,KAArB;AACH,OAHM,MAGA,IAAI,QAAJ,EAAc;AACjB,aAAK,KAAL,CAAW,IAAX,CAAgB,iBAAhB,EAAmC,IAAnC;AACA,aAAK,WAAL,CAAiB,CAAjB,EAAoB,KAApB;AACH,OAHM,MAGA;AACH,YAAM,KAAK,GAAG,KAAK,KAAL,CAAW,WAAX,CAAuB,GAAvB,CAA2B,KAA3B,CAAiC,GAAjC,CAAd;AACA,QAAA,KAAK,CAAC,CAAD,CAAL,GAAW,MAAX;AACA,aAAK,KAAL,CAAW,IAAX,CAAgB,KAAK,CAAC,IAAN,CAAW,GAAX,CAAhB;AACA,aAAK,WAAL,CAAiB,CAAjB,EAAoB,CAApB;AACH;AAEJ;;;;EAjD+B,MAAM,CAAC,OAAP,CAAe,MAAf,CAAsB,M;;SAArC,M;AAoDrB,MAAM,CAAC,WAAP,CAAmB,iBAAnB,CAAqC,QAArC,CACI,QADJ,EAEI,UAAsD,CAAtD,EAAiE,CAAjE,EAA4E,OAA5E,EAA6F,KAA7F,EAAoH;AACpH,MAAI,MAAM,GAAG,IAAI,MAAJ,CAAW,KAAK,KAAhB,EAAuB,CAAvB,EAA0B,CAA1B,EAA6B,OAA7B,EAAsC,KAAtC,CAAb;AAEA,OAAK,WAAL,CAAiB,GAAjB,CAAqB,MAArB;AACA,OAAK,UAAL,CAAgB,GAAhB,CAAoB,MAApB;AAEA,OAAK,KAAL,CAAW,OAAX,CAAmB,KAAnB,CAAyB,UAAzB,CAAoC,MAApC,EAA4C,MAAM,CAAC,OAAP,CAAe,MAAf,CAAsB,YAAlE;AAEA,EAAA,MAAM,CAAC,IAAP,CAAY,OAAZ,CAAoB,MAAM,CAAC,KAAP,GAAe,GAAnC,EAAwC,MAAM,CAAC,MAAP,GAAgB,GAAxD;AAEA,SAAO,MAAP;AACC,CAbL","sourcesContent":["import Phaser from 'phaser';\n\ndeclare global\n{\n    namespace Phaser.GameObjects\n    {\n        interface GameObjectFactory\n        {\n            avatar(x: number, y: number, texture: string, frame?: string | number): Avatar\n        }\n    }\n}\n\nexport default class Avatar extends Phaser.Physics.Arcade.Sprite {\n    constructor(scene: Phaser.Scene, x: number, y: number, texture: string, frame?: string | number) {\n        super(scene, x, y, texture, frame);\n\n        this.anims.play('avatar-idle-down');\n    }\n\n    preUpdate(t: number, dt: number) {\n        super.preUpdate(t, dt);\n    }\n\n    update(cursors: Phaser.Types.Input.Keyboard.CursorKeys) {\n\n        if (!cursors) {\n            return\n        }\n\n        const speed = 100\n\n        const leftDown = cursors.left?.isDown\n        const rightDown = cursors.right?.isDown\n        const upDown = cursors.up?.isDown\n        const downDown = cursors.down?.isDown\n\n        if (leftDown) {\n            this.anims.play('avatar-run-side', true)\n            this.setVelocity(-speed, 0)\n\n            this.scaleX = -1\n            this.body.offset.x = 24\n        } else if (rightDown) {\n            this.anims.play('avatar-run-side', true)\n            this.setVelocity(speed, 0)\n\n            this.scaleX = 1\n            this.body.offset.x = 8\n        } else if (upDown) {\n            this.anims.play('avatar-run-up', true)\n            this.setVelocity(0, -speed)\n        } else if (downDown) {\n            this.anims.play('avatar-run-down', true)\n            this.setVelocity(0, speed)\n        } else {\n            const parts = this.anims.currentAnim.key.split('-')\n            parts[1] = 'idle'\n            this.anims.play(parts.join('-'))\n            this.setVelocity(0, 0)\n        }\n\n    }\n}\n\nPhaser.GameObjects.GameObjectFactory.register(\n    'avatar',\n    function (this: Phaser.GameObjects.GameObjectFactory, x: number, y: number, texture: string, frame?: string | number) {\n    let sprite = new Avatar(this.scene, x, y, texture, frame)\n\n    this.displayList.add(sprite)\n    this.updateList.add(sprite)\n\n    this.scene.physics.world.enableBody(sprite, Phaser.Physics.Arcade.DYNAMIC_BODY)\n\n    sprite.body.setSize(sprite.width * 0.5, sprite.height * 0.8)\n\n    return sprite\n    }\n)\n"],"sourceRoot":""}]}