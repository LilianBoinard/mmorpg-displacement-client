{"remainingRequest":"/home/pyro/WebstormProjects/hissiane-client/node_modules/thread-loader/dist/cjs.js!/home/pyro/WebstormProjects/hissiane-client/node_modules/babel-loader/lib/index.js!/home/pyro/WebstormProjects/hissiane-client/node_modules/ts-loader/index.js??ref--14-3!/home/pyro/WebstormProjects/hissiane-client/node_modules/eslint-loader/index.js??ref--13-0!/home/pyro/WebstormProjects/hissiane-client/src/game/scenes/PlayScene.ts","dependencies":[{"path":"/home/pyro/WebstormProjects/hissiane-client/src/game/scenes/PlayScene.ts","mtime":1616110897573},{"path":"/home/pyro/WebstormProjects/hissiane-client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/pyro/WebstormProjects/hissiane-client/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/pyro/WebstormProjects/hissiane-client/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/pyro/WebstormProjects/hissiane-client/node_modules/ts-loader/index.js","mtime":499162500000},{"path":"/home/pyro/WebstormProjects/hissiane-client/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICIvaG9tZS9weXJvL1dlYnN0b3JtUHJvamVjdHMvaGlzc2lhbmUtY2xpZW50L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jbGFzc0NhbGxDaGVjayI7CmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSAiL2hvbWUvcHlyby9XZWJzdG9ybVByb2plY3RzL2hpc3NpYW5lLWNsaWVudC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlQ2xhc3MiOwppbXBvcnQgX2luaGVyaXRzIGZyb20gIi9ob21lL3B5cm8vV2Vic3Rvcm1Qcm9qZWN0cy9oaXNzaWFuZS1jbGllbnQvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2luaGVyaXRzIjsKaW1wb3J0IF9jcmVhdGVTdXBlciBmcm9tICIvaG9tZS9weXJvL1dlYnN0b3JtUHJvamVjdHMvaGlzc2lhbmUtY2xpZW50L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVTdXBlciI7CmltcG9ydCB7IFNjZW5lIH0gZnJvbSAncGhhc2VyJzsKaW1wb3J0IHsgY3JlYXRlQXZhdGFyQW5pbXMgfSBmcm9tICJAL2dhbWUvYW5pbXMvQXZhdGFyQW5pbXMiOwppbXBvcnQgIkAvZ2FtZS9hdmF0YXIvQXZhdGFyIjsKCnZhciBQbGF5U2NlbmUgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9TY2VuZSkgewogIF9pbmhlcml0cyhQbGF5U2NlbmUsIF9TY2VuZSk7CgogIHZhciBfc3VwZXIgPSBfY3JlYXRlU3VwZXIoUGxheVNjZW5lKTsKCiAgZnVuY3Rpb24gUGxheVNjZW5lKCkgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFBsYXlTY2VuZSk7CgogICAgcmV0dXJuIF9zdXBlci5jYWxsKHRoaXMsIHsKICAgICAga2V5OiAnUGxheVNjZW5lJwogICAgfSk7CiAgfQoKICBfY3JlYXRlQ2xhc3MoUGxheVNjZW5lLCBbewogICAga2V5OiAicHJlbG9hZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcHJlbG9hZCgpIHsKICAgICAgdGhpcy5jdXJzb3JzID0gdGhpcy5pbnB1dC5rZXlib2FyZC5jcmVhdGVDdXJzb3JLZXlzKCk7CiAgICB9CiAgfSwgewogICAga2V5OiAiY3JlYXRlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGUoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICBjcmVhdGVBdmF0YXJBbmltcyh0aGlzLmFuaW1zKTsKICAgICAgdmFyIGNhbSA9IHRoaXMuY2FtZXJhcy5tYWluOyAvLyBjYW0uZmFkZUluKDUwMCwgMCwgMCwgMCk7CiAgICAgIC8vIGNhbS56b29tVG8oMiwgNTAwKTsKCiAgICAgIGNhbS5zZXRCYWNrZ3JvdW5kQ29sb3IoJyMwZjNmNTInKTsKICAgICAgdmFyIG1hcCA9IHRoaXMubWFrZS50aWxlbWFwKHsKICAgICAgICBrZXk6ICdtYXAnCiAgICAgIH0pOwogICAgICB2YXIgdGlsZXNldEdyYXNzID0gbWFwLmFkZFRpbGVzZXRJbWFnZSgnZmFudGFzeS1ncmFzcycsICd0aWxlc19ncmFzcycsIDE2LCAxNiwgMSwgMik7CiAgICAgIHZhciB0aWxlc2V0UmVsaWVmID0gbWFwLmFkZFRpbGVzZXRJbWFnZSgnZmFudGFzeS1ncmFzcycsICd0aWxlc19ncmFzcycsIDE2LCAxNiwgMSwgMik7CiAgICAgIHZhciB0aWxlc2V0RGVjb3JhdGl2ZSA9IG1hcC5hZGRUaWxlc2V0SW1hZ2UoJ2ZhbnRhc3ktZGVjbycsICd0aWxlc19kZWNvcmF0aXZlJywgMTYsIDE2LCAxLCAyKTsKICAgICAgdmFyIGxheWVyMSA9IG1hcC5jcmVhdGVMYXllcignZ3Jhc3MnLCB0aWxlc2V0R3Jhc3MpOwogICAgICB2YXIgbGF5ZXIzID0gbWFwLmNyZWF0ZUxheWVyKCdyZWxpZWYnLCB0aWxlc2V0UmVsaWVmKTsKICAgICAgdmFyIGxheWVyMiA9IG1hcC5jcmVhdGVMYXllcignZGVjbycsIHRpbGVzZXREZWNvcmF0aXZlKTsKICAgICAgbGF5ZXIzLnNldENvbGxpc2lvbkJ5UHJvcGVydHkoewogICAgICAgIGNvbGxpZGVzOiB0cnVlCiAgICAgIH0pOwogICAgICBsYXllcjEuc2V0Q29sbGlzaW9uQnlQcm9wZXJ0eSh7CiAgICAgICAgY29sbGlkZXM6IHRydWUKICAgICAgfSk7CiAgICAgIGxheWVyMi5zZXRDb2xsaXNpb25CeVByb3BlcnR5KHsKICAgICAgICBjb2xsaWRlczogdHJ1ZQogICAgICB9KTsKICAgICAgdGhpcy5hdmF0YXIgPSB0aGlzLmFkZC5hdmF0YXIoNjAwLCAyMDAsICdhdmF0YXInKTsgLy8gLS0tLS0gQ2FtZXJhIG1vdmUgd2l0aCBtb3VzZSAtLS0tLQoKICAgICAgdGhpcy5pbnB1dC5vbigncG9pbnRlcm1vdmUnLCBmdW5jdGlvbiAocCkgewogICAgICAgIGlmIChwLmlzRG93bikgewogICAgICAgICAgY2FtLnN0b3BGb2xsb3coKTsKICAgICAgICAgIGNhbS5zY3JvbGxYIC09IChwLnggLSBwLnByZXZQb3NpdGlvbi54KSAvIGNhbS56b29tOwogICAgICAgICAgY2FtLnNjcm9sbFkgLT0gKHAueSAtIHAucHJldlBvc2l0aW9uLnkpIC8gY2FtLnpvb207CiAgICAgICAgfQogICAgICB9KTsKICAgICAgdGhpcy5pbnB1dC5vbigncG9pbnRlcmRvd24nLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgY2FtLnN0YXJ0Rm9sbG93KF90aGlzLmF2YXRhcik7CiAgICAgIH0pOwogICAgICB0aGlzLmlucHV0Lm9uKCd3aGVlbCcsIGZ1bmN0aW9uIChwb2ludGVyLCBnYW1lT2JqZWN0cywgZGVsdGFYLCBkZWx0YVkpIHsKICAgICAgICBpZiAoZGVsdGFZID4gMCkgewogICAgICAgICAgY2FtLnpvb20gLT0gLjE7CiAgICAgICAgfQoKICAgICAgICBpZiAoZGVsdGFZIDwgMCkgewogICAgICAgICAgY2FtLnpvb20gKz0gLjE7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJ1cGRhdGUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHVwZGF0ZSgpIHsKICAgICAgaWYgKHRoaXMuYXZhdGFyKSB7CiAgICAgICAgdGhpcy5hdmF0YXIudXBkYXRlKHRoaXMuY3Vyc29ycyk7CiAgICAgIH0KICAgIH0KICB9XSk7CgogIHJldHVybiBQbGF5U2NlbmU7Cn0oU2NlbmUpOwoKZXhwb3J0IHsgUGxheVNjZW5lIGFzIGRlZmF1bHQgfTs="},{"version":3,"sources":["/home/pyro/WebstormProjects/hissiane-client/node_modules/eslint-loader/index.js??ref--13-0!/home/pyro/WebstormProjects/hissiane-client/src/game/scenes/PlayScene.ts"],"names":[],"mappings":"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","sourcesContent":["import { Scene } from 'phaser';\nimport { createAvatarAnims } from \"@/game/anims/AvatarAnims\";\nimport \"@/game/avatar/Avatar\";\nimport Avatar from \"@/game/avatar/Avatar\";\n\nexport default class PlayScene extends Scene {\n  private cursors!: Phaser.Types.Input.Keyboard.CursorKeys;\n  private avatar!: Avatar;\n  constructor () {\n    super({ key: 'PlayScene' })\n  }\n\n  preload()\n  {\n    this.cursors = this.input.keyboard.createCursorKeys();\n  }\n\n  create () {\n    createAvatarAnims(this.anims);\n\n    const cam = this.cameras.main;\n    // cam.fadeIn(500, 0, 0, 0);\n    // cam.zoomTo(2, 500);\n    cam.setBackgroundColor('#0f3f52');\n\n    const map = this.make.tilemap({ key: 'map'} );\n\n    const tilesetGrass = map.addTilesetImage('fantasy-grass', 'tiles_grass', 16, 16, 1, 2);\n    const tilesetRelief = map.addTilesetImage('fantasy-grass', 'tiles_grass', 16, 16, 1, 2);\n    const tilesetDecorative = map.addTilesetImage('fantasy-deco', 'tiles_decorative', 16, 16, 1, 2);\n\n    const layer1 = map.createLayer('grass', tilesetGrass);\n    const layer3 = map.createLayer('relief', tilesetRelief);\n    const layer2 = map.createLayer('deco', tilesetDecorative);\n    layer3.setCollisionByProperty({ collides: true });\n    layer1.setCollisionByProperty({ collides: true });\n    layer2.setCollisionByProperty({ collides: true });\n\n    this.avatar = this.add.avatar(600, 200, 'avatar');\n\n    // ----- Camera move with mouse -----\n    this.input.on('pointermove', (p: { isDown: any; x: number; prevPosition: { x: number; y: number; }; y: number; }) => {\n      if (p.isDown) {\n        cam.stopFollow();\n        cam.scrollX -= (p.x - p.prevPosition.x) / cam.zoom;\n        cam.scrollY -= (p.y - p.prevPosition.y) / cam.zoom;\n      }\n    });\n    this.input.on('pointerdown', () => {\n      cam.startFollow(this.avatar);\n    });\n    this.input.on('wheel',  (pointer: any, gameObjects: any, deltaX: any, deltaY: number) => {\n      if (deltaY > 0) {\n        cam.zoom -= .1;\n      }\n      if (deltaY < 0) {\n        cam.zoom += .1;\n      }\n    });\n\n  }\n  \n  update ()\n  {\n    if (this.avatar)\n    {\n      this.avatar.update(this.cursors)\n    }\n  }\n}\n"],"sourceRoot":""}]}